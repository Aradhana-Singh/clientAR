<div *ngIf = "progress">
  <p-progressBar mode="indeterminate"></p-progressBar>
</div>

<p-toast [baseZIndex]="15000"></p-toast>

<div class="box" >
  <div class="container">
    
    <div *ngIf = "commithistory?.length">
      <cdk-virtual-scroll-viewport class="gkz-viewport" [itemSize]="20" class="slide-in-bottom">

      <div *cdkVirtualFor="let i of commithistory;" class="item-div slide-in-bottom" >
      
        <div class="row m-0">

          <div class="col-sm-3">
            <div class="p-2 flex-fill bd-highlight"><img class="mr-07" src="assets/images/time.png">{{i.timestamp | date:'mediumDate'}}, {{i.timestamp | date:'mediumTime'}}</div>
            <div class="p-2 flex-fill bd-highlight"><img class="mr-07" src="assets/images/org.png">{{i.nick_name}} </div>
          </div>

          <div class="col-sm-2 p-0">
            <div class="p-2 flex-fill bd-highlight" style="font-size: 14px;"><img class="mr-07" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPgo8cGF0aCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSIiIGQ9Ik01MTEuNjc2LDQ5OC43NTJsLTEyLjgtNTEuMmMtNi4wNzMtMjQuODM4LTI0LjQ4NS00NC44MTMtNDguNzQ3LTUyLjg4NWwtOTMuODY3LTMxLjI3NSAgYy0yMi44OTEtOS41MzYtMzMuMzY1LTQ2LjQtMzUuNjI3LTYwLjM5NWMxNy40NDItMTQuNTA0LDI4LjY2NS0zNS4xNCwzMS4zNi01Ny42NjRjLTAuMzg1LTMuODQ3LDAuNTIzLTcuNzEzLDIuNTgxLTEwLjk4NyAgYzMuMzI2LTAuODMzLDYuMDQ5LTMuMjE1LDcuMzE3LTYuNGM2LjE0Mi0xNC44NzIsOS45OTctMzAuNTg4LDExLjQzNS00Ni42MTNjMC4wMDMtMC44NzEtMC4xMDQtMS43MzgtMC4zMi0yLjU4MSAgYy0xLjUyOC02LjIyNy01LjE4OS0xMS43MjItMTAuMzQ3LTE1LjUzMXYtNTYuNTU1YzAtMzQuMzY4LTEwLjQ5Ni00OC40NjktMjEuNTQ3LTU2LjY0QzMzOS4wMDQsMzMuNDcyLDMyMS4yNzYsMCwyNTUuOTk2LDAgIGMtNTcuOTE3LDIuMzMyLTEwNC4zMzUsNDguNzUtMTA2LjY2NywxMDYuNjY3djU2LjU1NWMtNS4xNTgsMy44MDktOC44MTksOS4zMDQtMTAuMzQ3LDE1LjUzMWMtMC4yMTYsMC44NDMtMC4zMjMsMS43MTEtMC4zMiwyLjU4MSAgYzEuNDM2LDE2LjAzMyw1LjI5MSwzMS43NTYsMTEuNDM1LDQ2LjYzNWMwLjkyNCwzLjAxNSwzLjM0Nyw1LjMzNCw2LjQsNi4xMjNjMS4xOTUsMC41OTcsMy40MzUsMy42OTEsMy40MzUsMTEuMjQzICBjMi43MTEsMjIuNTg4LDEzLjk5OSw0My4yNzEsMzEuNTMxLDU3Ljc3MWMtMi4yNCwxMy45NzMtMTIuNjUxLDUwLjgxNi0zNC45MDEsNjAuMTE3bC05NC42OTksMzEuNDQ1ICBjLTI0LjI0Myw4LjA3MS00Mi42NDMsMjguMDI2LTQ4LjcyNSw1Mi44NDNsLTEyLjgsNTEuMmMtMS40NDksNS43MSwyLjAwNSwxMS41MTQsNy43MTUsMTIuOTYzYzAuODUzLDAuMjE3LDEuNzMsMC4zMjcsMi42MSwwLjMyOCAgaDQ5MC42NjdjNS44OTEtMC4wMDIsMTAuNjY1LTQuNzc5LDEwLjY2NC0xMC42N0M1MTEuOTkzLDUwMC40NjEsNTExLjg4Niw0OTkuNTk1LDUxMS42NzYsNDk4Ljc1MnoiIGZpbGw9IiM4MDg2OGIiIGRhdGEtb3JpZ2luYWw9IiM0NTVhNjQiIGNsYXNzPSIiPjwvcGF0aD4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPC9nPgo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8L2c+CjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjwvZz4KPC9nPjwvc3ZnPg==" width="20" height="20"/>{{i.git_username}}</div>
            <div class="p-2 flex-fill bd-highlight" style="font-size: 14px;"><img class="mr-07" src="assets/images/github.png">{{i.repo_name}}</div>
          </div>
          
          <div class="col-sm-5 p-0">
            <div class="p-2 flex-fill bd-highlight" style="font-size: 14px;"><img class="mr-07" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIiBjbGFzcz0iIj48Zz48ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxwYXRoIGQ9Im0yNy42NyAzLjEzaC0yMy4zNGEzLjM0IDMuMzQgMCAwIDAgLTMuMzMgMy4zM3YxNS4zM2EzLjM0IDMuMzQgMCAwIDAgMy4zMyAzLjM0aDIuNjdsMS45MiAzYTEuNDggMS40OCAwIDAgMCAxLjI3LjcgMS41MiAxLjUyIDAgMCAwIDEuMjgtLjczbDEuODItM2gxNC4zOGEzLjM0IDMuMzQgMCAwIDAgMy4zMy0zLjMxdi0xNS4zM2EzLjM0IDMuMzQgMCAwIDAgLTMuMzMtMy4zM3ptLTYuNjcgOWgtMTBhMSAxIDAgMCAxIC0xLTEgMSAxIDAgMCAxIDEtMWgxMGExIDEgMCAwIDEgMSAxIDEgMSAwIDAgMSAtMSAxem0xIDQuNTVhMSAxIDAgMCAxIC0xIDFoLTEwYTEgMSAwIDAgMSAwLTJoMTBhMSAxIDAgMCAxIDEgMXoiIGZpbGw9IiM4MDg2OGIiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIHN0eWxlPSIiIGNsYXNzPSIiPjwvcGF0aD48L2c+PC9nPjwvc3ZnPg=="  width="20" height="20" />{{i.commit_msg}}</div>
            <div class="p-2 flex-fill bd-highlight" style="font-size: 14px;">
              <img class="mr-07" src="assets/images/GitFinalSure.svg">{{ i.commit_hash }}</div>            
          </div>
          
          <div class = "p-2 col-sm-2 d-flex buttonclass">
            <button type="button" class=" mx-auto btn btn-outline-primary waves-effect" style="font-size: 14px; word-break: initial;" (click) = "showPositionDialog(i)">Deploy</button>
          </div>

        </div>     

      </div>

      
    
      </cdk-virtual-scroll-viewport>
    </div>

    <div *ngIf = "!commithistory?.length">
      <p class="text-ocean">No Commit History Exists</p>
    </div>

    <p-dialog [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000"
[draggable]="false" [resizable]="false">
      <!-- <p-dropdown [options]="orgs" id="SfOrg" ngModel name="SfOrg" [(ngModel)]="selectedOrg" optionLabel="nick_name" [filter]="true" placeholder="Choose SalesForce Org" [style]="{'width':'25%'}" [style]="{'max-width':'100%','width': '100%'}">
        <ng-template pTemplate="selectedItem">
            <div class="orgs-item orgs-item-value"  *ngIf="selectedOrg">
              <div>{{selectedOrg.nick_name}} | {{selectedOrg.org_label}}</div>
            </div> 
        </ng-template>
        <ng-template let-org pTemplate="item" >
            <div class="orgs-item" >
                <div >{{org.value.nick_name}} | {{org.value.org_label}}</div>
            </div>
        </ng-template>
      </p-dropdown> -->

      <p-multiSelect [options]="orgs" [(ngModel)]="selectedOrgs" display="chip" defaultLabel="Choose Target SalesForce Org(s)" optionLabel="nick_name" [style]="{'max-width':'100%','width': '100%'}" [disabled] = "disableAll">
        <!-- <ng-template let-value pTemplate="selectedItems">
          <div class="orgs-item orgs-item-value"  *ngFor="let option of selectedOrgs">
            <div>{{option.nick_name}} | {{option.org_label}}</div>
          </div> 
        </ng-template> -->
        <ng-template let-org pTemplate="item" >
            <div class="orgs-item" >
                <div>{{org.value.nick_name}} | {{org.value.org_label}}</div>
            </div>
        </ng-template>
      </p-multiSelect>

      <ng-template pTemplate="footer">
        <div class="buttons1" (click)="onDeploy()">
          <button class="blob1-btn submit" [disabled] = "disableAll">
            Ok
            <span class="blob1-btn__inner ">
              <span class="blob1-btn__blobs1 ">
                <span class="blob1-btn__blob1 "></span>
                <span class="blob1-btn__blob1 "></span>
                <span class="blob1-btn__blob1 "></span>
                <span class="blob1-btn__blob1 "></span>
              </span>
            </span>
          </button>
              
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
          <defs>
            <filter id="goo">
              <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10"></feGaussianBlur>
              <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 21 -7" result="goo"></feColorMatrix>
              <feBlend in2="goo" in="SourceGraphic" result="mix"></feBlend>
            </filter>
          </defs>
        </svg>
        </div>
      </ng-template>
    </p-dialog>
   
  </div>
</div>
 
  